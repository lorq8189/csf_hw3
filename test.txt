#!/bin/bash

# Greet user and request their name
echo "starting"


function run ()
{
    ./csim $1 $2 $3 write-allocate write-back fifo < swim.trace
    echo ""
}
function run2 ()
{
    ./csim $1 $2 $3 $4 $5 lru < gcc.trace
    echo ""
}

function r1 () {
run 1024 4 4 lower hit percentage, less cycles 1.6x

run 16 32 32

run 8 256 8 lower hit percentage, less cycles 1.5x

run 64 4 64

run 16 4 256 much higher store hit percentage, 7x more cycles

run 64 64 4 

run 32 32 16 decent hit percentage, lot of cycles

run 16 256 4

run 32 128 4
}


function r2 ()
{

    run2 32 128 4 "write-allocate" "write-back"
    run2 32 128 4 "write-allocate" "write-through"
    run2 32 128 4 "no-write-allocate" "write-through"

    run2 32 32 16 "write-allocate" "write-back"
    run2 32 32 16 "write-allocate" "write-through"
    run2 32 32 16 "no-write-allocate" "write-through"

    run2 8 16 128 "write-allocate" "write-back"
    run2 8 16 128 "write-allocate" "write-through"
    run2 8 16 128 "no-write-allocate" "write-through"
}

function r3()
{
    run 8 32 4
    run 16 64 4
    run 32 128 4

    run 64 256 8
    run 128 256 4

    run 128 512 4
    run 256 1024 4
    run 512 2048 4
    run 256 1024 4

    run 2048 8192 4

}


r3